# 协程

## 结构化并发

我们可以在执行操作所在的指定作用域内启动协程， 而不是像通常使用线程（线程总是全局的）那样在 GlobalScope 中启动。

在我们的示例中，我们使用 runBlocking 协程构建器将 main 函数转换为协程。 包括 runBlocking 在内的每个协程构建器都将 CoroutineScope
的实例添加到其代码块所在的作用域中。 我们可以在这个作用域中启动协程而无需显式 join 之，因为外部协程（示例中的 runBlocking）直到在其作用域中启动的所有协程都执行完毕后才会结束。

## 协程取消

取消是协作的，一段代码必须是协作的才能被取消。 所有协程库中的挂起函数都是可以被取消的。它们检查协程的取消，并且在取消时抛出CancellationException异常。

### 让挂起函数变成不可取消

 ```
                    withContext(NonCancellable){
                        delay(100)
                        logI("执行完成")
                    }
```